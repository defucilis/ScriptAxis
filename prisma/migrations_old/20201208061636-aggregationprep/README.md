# Migration `20201208061636-aggregationprep`

This migration has been generated by Lachlan Sleight <defucilis@gmail.com> at 12/8/2020, 5:16:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Script" DROP COLUMN "talent"

CREATE TABLE "Talent" (
    "name" TEXT NOT NULL,
    "scriptId" INTEGER,

    PRIMARY KEY ("name")
)

CREATE TABLE "Studio" (
    "name" TEXT NOT NULL,

    PRIMARY KEY ("name")
)

ALTER TABLE "Talent" ADD FOREIGN KEY("scriptId")REFERENCES "Script"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201208011217-addsavedfilters..20201208061636-aggregationprep
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -25,9 +25,9 @@
   funscripts        String[]
   sourceUrl         String?
   streamingUrl      String?
   studio            String?
-  talent            String[]
+  talent            Talent[]
   active            Boolean     @default(true)
   likedBy           User[]      @relation("ScriptLiker")
   likeCount         Int         @default(0)
   thumbsUp          Int         @default(1)
@@ -60,8 +60,18 @@
   name              String      @id
   count             Int         @default(0)
 }
+//Talent for scripts - each script can have more than one
+model Talent {
+  name              String      @id
+}
+
+//Studio for scripts - each script can only have one
+model Studio {
+  name              String     @id
+}
+
 // User accounts - not in use yet
 model User {
   id                String      @default(uuid()) @id
   username          String      @unique
```
